{"version":3,"sources":["Content.js","Canvas.js","ebconfig.js","App.js","reportWebVitals.js","index.js"],"names":["Content","useContext","StoreContext","state","dispatch","currentPlaylist","trackIds","Array","from","playlists","useEasybase","configureFrame","sync","Frame","useEffect","tableName","limit","offset","className","length","div","initial","animate","variants","hidden","opacity","visible","transition","duration","sort","a","b","id","map","elem","favourites","has","nowPlaying","file","onClick","type","title","artist","Canvas","props","canvasRef","useRef","containerRef","animationFrameId","canvas","current","context","getContext","bounds","getBoundingClientRect","console","log","width","height","colorArray","gradient","createLinearGradient","window","innerWidth","bottom","Circle","x","y","dx","dy","radius","this","color","Math","floor","random","draw","beginPath","arc","PI","fillStyle","fill","update","addColorStop","circleArray","i","push","render","clearRect","innerHeight","requestAnimationFrame","cancelAnimationFrame","ref","ebconfig","createContext","initialState","media","home","Set","ids","reducer","action","playlist","add","trackId","delete","App","useReducer","Provider","value","when","staggerChildren","src","onEnded","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a627f45d.chunk.js","sourcesContent":["import { useContext, useEffect } from \"react\";\nimport { StoreContext } from \"./App\";\nimport \"./Content.css\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport { useEasybase } from \"easybase-react\";\nimport penrose from \"./images/penrose.png\";\nimport { motion } from \"framer-motion\";\n\nconst Content = () => {\n  const { state, dispatch } = useContext(StoreContext);\n  const currentPlaylist = state.currentPlaylist;\n  const trackIds = Array.from(state.playlists[currentPlaylist]);\n\n  // easybase db\n  const { configureFrame, sync, Frame } = useEasybase();\n\n  useEffect(() => {\n    configureFrame({ tableName: \"CLIO-TRACKS\", limit: 20, offset: 0 });\n    sync();\n  }, []);\n  // easybase db\n\n  // framer motion variants\n  const variants = {\n    hidden: { opacity: 0 },\n    visible: { opacity: 1, transition: { duration: 4 } },\n  };\n\n  return (\n    <div className=\"content\">\n      {/* <img src={penrose} alt=\"logo\" className=\"logo\" /> */}\n      <div className=\"playlist-title\">\n        <h3>dream world, driftwood</h3>\n        <p>\n          meditative // generative // ambient // lo-fi // internet music library\n        </p>\n        <p>last updated 14/2/2021</p>\n      </div>\n      {!trackIds.length ? (\n        <p>Looks like this playlist is empty. Check back later.</p>\n      ) : (\n        <motion.div initial=\"hidden\" animate=\"visible\" variants={variants}>\n          <table className=\"track-table\">\n            <thead>\n              <tr>\n                <td />\n                <td>Title</td>\n                <td>Artist</td>\n                <td>Length</td>\n              </tr>\n            </thead>\n\n            <tbody>\n              {Frame()\n                .sort((a, b) => (a.id > b.id ? 1 : -1))\n                .map((elem) => {\n                  const isFavourite = state.playlists.favourites.has(elem.id);\n\n                  return (\n                    <tr key={elem.id}>\n                      {/* <td>\n                      {isFavourite ? (\n                        <FavoriteIcon\n                          className=\"icon fav\"\n                          onClick={() => {\n                            dispatch({\n                              type: \"REMOVE_FAVOURITE\",\n                              trackId: elem.id,\n                            });\n                          }}\n                        />\n                      ) : (\n                        <FavoriteBorderIcon\n                          className=\"icon\"\n                          onClick={() => {\n                            dispatch({\n                              type: \"ADD_FAVOURITE\",\n                              trackId: elem.id,\n                            });\n                          }}\n                        />\n                      )}\n                    </td> */}\n                      <td>\n                        {state.nowPlaying === elem.file ? (\n                          <PauseIcon\n                            onClick={() => {\n                              dispatch({ type: \"NOW_PLAYING\", file: \"\" });\n                            }}\n                          />\n                        ) : (\n                          <PlayArrowIcon\n                            onClick={() => {\n                              dispatch({\n                                type: \"NOW_PLAYING\",\n                                file: elem.file,\n                              });\n                            }}\n                          />\n                        )}\n                      </td>\n                      <td>{elem.title}</td>\n                      <td>{elem.artist}</td>\n                      <td>{elem.length}</td>\n                    </tr>\n                  );\n                })}\n            </tbody>\n          </table>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default Content;\n","import { useRef, useEffect } from \"react\";\nimport \"./Canvas.css\";\n\nconst Canvas = (props) => {\n  const canvasRef = useRef(null);\n\n  const containerRef = useRef();\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    let frameCount = 0;\n    let animationFrameId;\n\n    let container = containerRef.current;\n    let bounds = container.getBoundingClientRect();\n    console.log(bounds);\n\n    canvas.width = bounds.width;\n    canvas.height = bounds.height;\n\n    let colorArray = [\"#0a9cbc\"];\n\n    let gradient = context.createLinearGradient(\n      0,\n      0,\n      window.innerWidth,\n      bounds.bottom\n    );\n    gradient.addColorStop(0, \"#e0e0e0\");\n    gradient.addColorStop(0.2, \"#fa9987\");\n    gradient.addColorStop(0.3, \"#e0e0e0\");\n    gradient.addColorStop(1, \"#fa9987\");\n\n    function Circle(x, y, dx, dy, radius) {\n      this.x = x;\n      this.y = y;\n      this.dx = dx;\n      this.dy = dy;\n      this.radius = radius;\n      this.color = colorArray[Math.floor(Math.random() * colorArray.length)];\n\n      this.draw = function () {\n        context.beginPath();\n        context.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\n        context.fillStyle = gradient;\n        context.fill();\n      };\n\n      this.update = () => {\n        if (this.x + this.radius > canvas.width || this.x - this.radius < 0) {\n          this.dx = -this.dx;\n        }\n\n        if (this.y + this.radius > canvas.height || this.y - this.radius < 0) {\n          this.dy = -this.dy;\n        }\n\n        this.x += this.dx / 6;\n        this.y += this.dy / 6;\n\n        this.draw();\n      };\n    }\n\n    // let ball = new Circle(50, 50, Math.random(), Math.random(), 10);\n    let circleArray = [];\n\n    for (let i = 0; i < 300; i++) {\n      let radius = Math.random() * 30 + 70;\n      let x = Math.random() * (canvas.width - radius * 2) + radius;\n      let y = Math.random() * (canvas.height - radius * 2) + radius;\n      let dx = Math.random() - 0.05;\n      let dy = Math.random() - 0.08;\n\n      circleArray.push(new Circle(x, y, dx, dy, radius));\n    }\n\n    const render = () => {\n      frameCount++;\n      context.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n      for (let i = 0; i < circleArray.length; i++) {\n        circleArray[i].update();\n      }\n\n      animationFrameId = window.requestAnimationFrame(render);\n    };\n    render();\n\n    return () => {\n      window.cancelAnimationFrame(animationFrameId);\n    };\n  }, []);\n\n  return (\n    <div className=\"canvas-container\" ref={containerRef}>\n      <canvas ref={canvasRef} {...props} />\n    </div>\n  );\n};\n\nexport default Canvas;\n","/* eslint-disable */\n// WARNING: Do not edit this file\n\nconst ebconfig = {\n  \"integration\": \"project-CLIO-3-DJsqLJ2fKxLSfupCpm6u4KPOckC0D2\",\n  \"version\": \"2020-11-20\"\n}\n\nexport default ebconfig;","import { useReducer, createContext, useRef } from \"react\";\nimport \"./App.css\";\nimport Sidebar from \"./Sidebar\";\nimport Content from \"./Content\";\nimport Canvas from \"./Canvas\";\nimport { EasybaseProvider } from \"easybase-react\";\nimport ebconfig from \"./ebconfig\";\nimport AudioPlayer from \"react-h5-audio-player\";\nimport \"react-h5-audio-player/src/styles.scss\";\nimport { motion } from \"framer-motion\";\nimport media from \"./media.json\";\n\nexport const StoreContext = createContext(null);\n\nconst DEFAULT_PLAYLIST = \"home\";\n\nconst initialState = {\n  currentPlaylist: DEFAULT_PLAYLIST,\n  media,\n  playlists: {\n    home: new Set(media.ids),\n    favourites: new Set(),\n  },\n  nowPlaying: \"\",\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_PLAYLIST\":\n      return {\n        ...state,\n        playlists: { ...state.playlists, [action.playlist]: new Set() },\n      };\n    case \"SET_PLAYLIST\":\n      return { ...state, currentPlaylist: action.playlist };\n    case \"ADD_FAVOURITE\":\n      state.playlists.favourites.add(action.trackId);\n      return { ...state };\n    case \"REMOVE_FAVOURITE\":\n      state.playlists.favourites.delete(action.trackId);\n      return { ...state };\n    case \"NOW_PLAYING\":\n      state.nowPlaying = action.file;\n      return { ...state };\n    case \"AUDIO_END\":\n      state.nowPlaying = \"\";\n      return { ...state };\n\n    default:\n      return state;\n  }\n};\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const variants = {\n    hidden: {\n      opacity: 0,\n      transition: {\n        when: \"afterChildren\",\n      },\n    },\n    visible: {\n      opacity: 1,\n      transition: {\n        duration: 2,\n        when: \"beforeChildren\",\n        staggerChildren: 0.9,\n      },\n    },\n  };\n\n  return (\n    <EasybaseProvider ebconfig={ebconfig}>\n      <StoreContext.Provider value={{ state, dispatch }}>\n        <motion.div initial=\"hidden\" animate=\"visible\" variants={variants}>\n          <div className=\"app\">\n            {/* <Login /> */}\n            {/* <Sidebar /> */}\n            <Canvas />\n            <div className=\"content-player-container\">\n              <Content />\n              <div className=\"player-bar\">\n                <AudioPlayer\n                  src={state.nowPlaying}\n                  className=\"audio-player\"\n                  onEnded={() => {\n                    dispatch({ type: \"AUDIO_END\" });\n                  }}\n                />\n              </div>\n            </div>\n            <Canvas />\n          </div>\n        </motion.div>\n      </StoreContext.Provider>\n    </EasybaseProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}